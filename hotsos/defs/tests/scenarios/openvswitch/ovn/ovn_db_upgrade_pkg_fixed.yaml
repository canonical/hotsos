target-name: ovn_db_upgrade.yaml
data-root:
  files:
    var/log/ovn/ovn-controller.log: |
      2023-09-06T08:31:20.060Z|00263|main|WARN|controller version - 22.03.2-20.21.0-61.4 mismatch with northd version - 22.03.0-20.21.0-58.3
    sos_commands/systemd/systemctl_list-unit-files: |
      neutron-ovn-metadata-agent.service         enabled         enabled      
      ovn-controller.service                     static          enabled      
      ovn-host.service                           enabled         enabled      
    sos_commands/systemd/systemctl_list-units: |
      neutron-ovn-metadata-agent.service                                          loaded active     running         Neutron OVN Metadata Agent                                                   
      ovn-controller.service                                                      loaded active     running         Open Virtual Network host control daemon                                     
      ovn-host.service                                                            loaded active     exited          Open Virtual Network host components  
    sos_commands/dpkg/dpkg_-l: |
      ii  neutron-ovn-metadata-agent           2:16.4.2-0ubuntu4                                    all          Neutron is a virtual network service for Openstack - OVN metadata agent
      ii  ovn-common                           22.03.2-0ubuntu0.22.04.1~cloud1                              amd64        OVN common components
      ii  ovn-host                             22.03.2-0ubuntu0.22.04.1~cloud1                              amd64        OVN host components
  copy-from-original:
    - uptime
    - sos_commands/date/date
raised-issues:
  OVNError: >-
    OVN controller is currently reporting a version mismatch between itself and
    northd. This usually means ovn-central (ovn-northd etc) services have been
    upgraded before ovn-controller using a version of ovn that does not support
    this. See related bug https://bugs.launchpad.net/charm-ovn-chassis/+bug/1940043
    for context although the installed version (22.03.2-0ubuntu0.22.04.1~cloud1)
    of ovn-controller should already have that fix.
