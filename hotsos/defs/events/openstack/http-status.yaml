# NOTE:
#   * for efficiency, do not capture time as subgroup unless actually
#     necessary.
#   * we disable all-logs for these searches in order to not overwhelm hotsos
#     since these will typically return very large numbers of results.
cinder-sunbeam:
  input:
    command: kubectl_logs
    options:
      kwargs:
        namespace: openstack
        opt: cinder-0
        subopts: -c cinder-api
  expr: '@hotsos.core.plugins.openstack.HTTPStatusExprs.sunbeam_cinder'
cinder:
  input:
    path: 'var/log/apache2/cinder_access.log'
    options:
      disable-all-logs: true
  expr: '@hotsos.core.plugins.openstack.HTTPStatusExprs.apache_common'

glance-sunbeam:
  input:
    command: kubectl_logs
    options:
      kwargs:
        namespace: openstack
        opt: glance-0
        subopts: -c glance-api
  expr: '@hotsos.core.plugins.openstack.HTTPStatusExprs.sunbeam_glance'
glance:
  input:
    path: 'var/log/apache2/glance_access.log'
    options:
      disable-all-logs: true
  expr: '@hotsos.core.plugins.openstack.HTTPStatusExprs.apache_common'

keystone-sunbeam:
  input:
    command: kubectl_logs
    options:
      kwargs:
        namespace: openstack
        opt: keystone-0
        subopts: -c keystone
  expr: '@hotsos.core.plugins.openstack.HTTPStatusExprs.sunbeam_keystone'
keystone:
  input:
    path: 'var/log/apache2/keystone_access.log'
    options:
      disable-all-logs: true
  expr: '@hotsos.core.plugins.openstack.HTTPStatusExprs.apache_common'

neutron-sunbeam:
  input:
    command: kubectl_logs
    options:
      kwargs:
        namespace: openstack
        opt: neutron-0
        subopts: -c neutron-server
  expr: '@hotsos.core.plugins.openstack.HTTPStatusExprs.sunbeam_neutron'
neutron:
  input:
    path: 'var/log/neutron/neutron-server.log'
    options:
      disable-all-logs: true
  expr: '@hotsos.core.plugins.openstack.HTTPStatusExprs.wsgi_neutron'

nova-sunbeam:
  input:
    command: kubectl_logs
    options:
      kwargs:
        namespace: openstack
        opt: nova-0
        subopts: -c nova-api
  expr: '@hotsos.core.plugins.openstack.HTTPStatusExprs.sunbeam_nova'
nova:
  input:
    path: 'var/log/apache2/nova-api-os-compute_access.log'
    options:
      disable-all-logs: true
  expr: '@hotsos.core.plugins.openstack.HTTPStatusExprs.apache_common'

octavia-sunbeam:
  input:
    command: kubectl_logs
    options:
      kwargs:
        namespace: openstack
        opt: octavia-0
        subopts: -c octavia-api
  expr: '@hotsos.core.plugins.openstack.HTTPStatusExprs.sunbeam_octavia'
octavia:
  input:
    path: 'var/log/apache2/octavia_access.log'
    options:
      disable-all-logs: true
  expr: '@hotsos.core.plugins.openstack.HTTPStatusExprs.apache_common'

placement-sunbeam:
  input:
    command: kubectl_logs
    options:
      kwargs:
        namespace: openstack
        opt: placement-0
        subopts: -c placement-api
  expr: '@hotsos.core.plugins.openstack.HTTPStatusExprs.sunbeam_placement'
placement:
  input:
    path: 'var/log/apache2/placement_access.log'
    options:
      disable-all-logs: true
  expr: '@hotsos.core.plugins.openstack.HTTPStatusExprs.apache_common'
