checks:
  has_1858519:
    input:
      path: 'var/log/juju/unit-ceph-osd*.log'
    expr: '.* Cannot zap a device used by lvm'
  has_1812361:
    input:
      path: 'var/log/juju/unit-glance-simplestreams-sync*.log'
    expr: '.* Missing required data: internal_host internal_port'
conclusions:
  lp1858519:
    decision: has_1858519
    raises:
      type: LaunchpadBug
      bug-id: 1858519
      message: >-
        known ceph-osd charm bug identified - charm tried to zap a disk but
        failed since the disk has an LVM header. If you are sure the disk is
        not in active use by LVM, you may run pvremove on it before using it as
        an OSD - see LP bug for details.
  lp1812361:
    decision: has_1812361
    raises:
      type: LaunchpadBug
      bug-id: 1812361
      message: >-
        known glance-simplestream-sync bug identified - this happens because
        the relation data received from keystone does not have some of the
        expected data (internal_host and internal_port). Upgrading
        charm-keystone to version >= stable/539 should fix the problem.
